# 생성자

### 생성자
클래스의 인스턴스를 생성함면 객체 크기만큼 메모리가 할당된다. 이를 위해 값을 지정할 때, 정보 은폐를 기본으로 하는 클래스에서는 외부에서 초깃값을 지정하는 행위는 어울리지 않다. 또, 모든 멤버가 대입만으로 초기화되는 것은 아니며 계산이 필요하거나 메모리를 할당하는 능동적인 동작이 필요한 경우도 존재한다.

따라서 클래스는 초기식을 쓰지 않고 객체를 초기화하는 **생성자**라는 함수를 사용한다. 생성자는 클래스 스스로 초기화 방법을 캡슐화하여 부품으로서의 완성도를 높이고 기본 타입과 동등해지는 장치이다.

### 생성자 오버로딩
생성자도 일종의 하수이며 인수열이 다르면 여러 벌로 오버로딩할 수 있으므로 객체 초기화 방법의 개수만큼 정의할 수 있다.

### 파괴자
컴퓨터 안에서 동작하는 모든 것은 항상 자신이 생성되기 전의 상태로 환경을 돌려 놓아야 시스템이 향상성을 유지한다. 객체도 마찬가지로 자신이 생성되기 전의 상태로 정리해야 하는데, 이러한 역할을 하는 것이 **파괴자**이다.    
~클래스명으로 선언한다.

### 생성자와 파괴자의 특징
> 컴파일러에 의해 자동으로 호출되므로 이름이 정해져 있고 임의의 이름을 붙일 수 없다. 생성자와 파괴자는 클래스명과 같게 설정해야 한다.   
> 생성과 파괴는 동작일 뿐, 조사나 계산이 아니어서 리턴값이 없다.   
> 외부에서 자동으로 호출되므로 **public 액세스 속성**을 가져야 한다.   
> 생성자는 인수를 가지므로 오버로딩하여 복수 개의 초기화 방법을 제공할 수 있으나, 파괴자는 인수를 받지 않아 오버로딩을 할 수 없다.   
> 둘 다 디폴트가 있어 컴파일러가 아무것도 하지 않는 생성자와 파괴자를 알아서 만든다.   
> friend나 static이 될 수 없다.

### 객체의 동적 생성
객체를 동적 생성할 때는 **new** 연산자를 사용한다. new 연산자는 객체를 저장할 메모리를 할당할 뿐만 아니라 생성자를 호출하여 객체를 초기화한다.   
즉, C언어에서는 malloc/free 함수를 이용해 메모리 할당과 해제를 하지만, C++에서는 new/delete 연산자를 사용한다.

### 디폴트 생성자
디폴트 생성자는 무난한 값으로 초기화하는 역할을 하며, 멤버 함수에서 초기화 여부를 알 수 있다.   
다만, 하나라도 생성자가 있다면 암시적인 디폴트 생성자는 정의되지 않으며 이 경우 빈 객체나 객체의 배열을 생성할 수 없다.

### 복사 생성자
이미 선언된 객체로부터 같은 타입의 객체를 다시 만드는 것으로, 똑같은 타입의 객체 레퍼런스를 인수로 받아 객체의 멤버를 생성되는 객체의 멤버에 복사한다.
일반적인 복사 생성자는 멤버값을 1대1로 대입할 뿐이어서 두 객체의 포인터가 같은 번지를 가리키고 있다. 그래서 포인터를 가진 클래스가 완전한 사본을 만들기 위해서는 **깊은 복사**를 해야 한다. 직접 복사 생성자를 정의하여 사본에 별도의 메모리를 할당해야 한다.

## 멤버 초기화 리스트
멤버 변수의 값을 초기화하는 것이 주임무인 생성자는 인수로 전달받은 값을 멤버에 대입하는 것이 보통인데, 특별한 처리 없이 단순 대입을 한다면 초기화 리스트를 사용하는 것이 간편하다. 레퍼런스 멤버 또한 마찬가지이다.

## 변환 생성자
클래스의 객체는 비슷한 타입끼리 암시적으로 변환이 가능한데, 이를 위해 변환 생성자를 사용한다. 변환 생성자는 다른 타입의 값으로부터 객체를 만든다.
변환 함수로 또는 클래스 간의 변환으로도 사용이 가능하다.